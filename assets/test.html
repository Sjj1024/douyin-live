<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <script src="./vFun.js"></script>
        <script src="./webmssdk.es5.js"></script>
    </head>
    <body>
        <div>测试代码</div>
    </body>
    <script>
        const config = [
            {
                param_name: 'live_id',
                param_type: 'string',
            },
            {
                param_name: 'aid',
                param_type: 'string',
            },
            {
                param_name: 'version_code',
                param_type: 'string',
            },
            {
                param_name: 'webcast_sdk_version',
                param_type: 'string',
            },
            {
                param_name: 'room_id',
                param_type: 'string',
            },
            {
                param_name: 'sub_room_id',
                param_type: 'string',
            },
            {
                param_name: 'sub_channel_id',
                param_type: 'string',
            },
            {
                param_name: 'did_rule',
                param_type: 'string',
            },
            {
                param_name: 'user_unique_id',
                param_type: 'string',
            },
            {
                param_name: 'device_platform',
                param_type: 'string',
            },
            {
                param_name: 'device_type',
                param_type: 'string',
            },
            {
                param_name: 'ac',
                param_type: 'string',
            },
            {
                param_name: 'identity',
                param_type: 'string',
            },
        ]

        // 使用for便利试试
        for (let { param_name: i } of config) {
            console.log('i----', i)
        }
        const o =
            ',live_id=1,aid=6383,version_code=180800,webcast_sdk_version=1.0.14-beta.0,room_id=7382772251994655488,sub_room_id=,sub_channel_id=,did_rule=3,user_unique_id=7347516590731134502,device_platform=web,device_type=,ac=,identity=audience'
        const substr = o.substring(1)
        console.log('subStr----', substr)
        // s函数就是stringToBytes
        const sResult = sFunc(substr)
        //  V()函数就是
        console.log('s函数stringToBytes结果', sResult)
        // 有了s的返回结果，再调用i.wordsToBytes
        // var r = i.wordsToBytes(s(e, t));
        const r = wordsToBytes(sResult)
        console.log('r----', r)
        // 最后调用bytesToHex;
        // return t && t.asBytes ? r : t && t.asString ? a.bytesToString(r) : i.bytesToHex(r)
        const bytesRes = bytesToHex(r)
        console.log('bytesRes----', bytesRes)
        const frontierSignRes = window.byted_acrawler.frontierSign({
            'X-MS-STUB': bytesRes,
        })
        console.log('frontierSignRes----', frontierSignRes)
    </script>
</html>
